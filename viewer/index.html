<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FF7 Battle Scene Viewer</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <h1>FF7 Battle Scene Viewer</h1>
            <div class="file-controls">
                <input type="file" id="file-input" accept="*">
                <label for="file-input" class="file-label">
                    <span class="file-icon">üìÇ</span>
                    <span class="file-text">Select Scene File</span>
                </label>
                <span id="file-name" class="file-name">No file selected</span>
                <button id="export-btn" style="margin-left: 12px; padding: 8px 16px; background: #2a4a6a; border: 1px solid #3a5a8a; border-radius: 4px; color: #a0a0c0; cursor: pointer; font-size: 0.9rem;" disabled>Export to PC</button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="app-main">
            <!-- Left Panel: Debug Info -->
            <aside class="panel panel-left">
                <div class="panel-header">
                    <h2>Debug Info</h2>
                </div>
                <div class="panel-content" id="debug-panel">
                    <div class="placeholder">
                        Load a scene file to view debug information
                    </div>
                </div>
            </aside>

            <!-- Center: 3D Viewport -->
            <section class="viewport-container">
                <div id="viewport" class="viewport">
                    <div class="viewport-overlay" id="viewport-overlay">
                        <div class="drop-zone" id="drop-zone">
                            <div class="drop-icon">‚¨áÔ∏è</div>
                            <div class="drop-text">Drop scene file here</div>
                            <div class="drop-hint">or use the file picker above</div>
                        </div>
                    </div>
                </div>
                <div class="viewport-controls">
                    <label>
                        <input type="checkbox" id="show-ground" checked>
                        Ground Plane
                    </label>
                    <label>
                        <input type="checkbox" id="show-sky" checked>
                        Sky Dome
                    </label>
                    <label>
                        <input type="checkbox" id="show-objects" checked>
                        Objects
                    </label>
                    <label>
                        <input type="checkbox" id="wireframe-mode">
                        Wireframe
                    </label>
                    <label>
                        <input type="checkbox" id="debug-uv-mode">
                        Debug UVs
                    </label>
                    <select id="uv-mapping-select" style="margin-left: 8px; padding: 2px 4px;">
                        <option value="0">Quad UVs: 2,0,3,1</option>
                        <option value="1" selected>Quad UVs: 0,1,2,3</option>
                        <option value="2">Quad UVs: 1,0,3,2</option>
                        <option value="3">Quad UVs: 0,2,1,3</option>
                        <option value="4">Quad UVs: 3,2,1,0</option>
                        <option value="5">Quad UVs: 2,3,0,1</option>
                    </select>
                    <select id="tri-uv-mapping-select" style="margin-left: 8px; padding: 2px 4px;">
                        <option value="0" selected>Tri UVs: 0,1,2</option>
                        <option value="1">Tri UVs: 0,2,1</option>
                        <option value="2">Tri UVs: 1,0,2</option>
                        <option value="3">Tri UVs: 1,2,0</option>
                        <option value="4">Tri UVs: 2,0,1</option>
                        <option value="5">Tri UVs: 2,1,0</option>
                    </select>
                    <label style="margin-left: 8px;">
                        UV Shift:
                        <input type="number" id="uv-shift-input" value="0" style="width: 50px; padding: 2px 4px;">
                    </label>
                    <button id="reset-camera">Reset Camera</button>
                </div>
            </section>

            <!-- Right Panel: Texture & Sections -->
            <aside class="panel panel-right">
                <div class="panel-section">
                    <div class="panel-header">
                        <h2>Texture Preview</h2>
                    </div>
                    <div class="panel-content texture-preview" id="texture-panel">
                        <div class="placeholder">
                            No texture loaded
                        </div>
                        <canvas id="texture-canvas" style="display: none;"></canvas>
                    </div>
                </div>
                
                <div class="panel-section">
                    <div class="panel-header">
                        <h2>Palette Debug</h2>
                    </div>
                    <div class="panel-content" id="palette-debug-panel">
                        <div class="placeholder">
                            Load a scene to configure palettes
                        </div>
                    </div>
                </div>
                
                <div class="panel-section">
                    <div class="panel-header">
                        <h2>Sections</h2>
                    </div>
                    <div class="panel-content" id="sections-panel">
                        <div class="placeholder">
                            No sections loaded
                        </div>
                    </div>
                </div>
            </aside>
        </main>

        <!-- Status Bar -->
        <footer class="status-bar">
            <span id="status-text">Ready</span>
            <span id="stats-text"></span>
        </footer>
    </div>

    <!-- Three.js from CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    
    <!-- JSZip for export bundling -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    
    <!-- App Scripts -->
    <script src="parser.js"></script>
    <script src="renderer.js"></script>
    <script src="exporter.js"></script>
    <script src="TextureRegionSelector.js"></script>
    <script src="ExportWizard.js"></script>
    <script src="app.js"></script>
</body>
</html>

